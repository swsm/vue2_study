<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>

<body>
<!--    <div id="app">-->
<!--      <input type="text" v-model="txtVal">-->
<!--      <p>{{txtVal}}</p>-->
<!--    </div>-->

<!--    <script>-->
<!--        new Vue({-->
<!--            el: '#app',-->
<!--            data: {-->
<!--                txtVal:'初始值'-->
<!--            }-->
<!--        })-->
<!--        -->
<!--    </script>-->

    <input type="text" id="oipt" >
    <p id="op"></p>

    <script>
        let obj = {}
        let val = "初始值"
        Object.defineProperty(obj, "txtVal", {
            get() {
                return val
            },
            set(newVal) {
                // 第三发 将数据发给 订阅者
                val = newVal
                op.innerHTML = val
                oipt.value = val
            }
        })
        console.log(obj.txtVal);
        // 订阅了数据
        op.innerHTML = obj.txtVal
        oipt.value = obj.txtVal
        
        oipt.addEventListener("input", e=> {
            // 发布了新的数据
            obj.txtVal = e.target.value
        })
    </script>


</body>

</html>
