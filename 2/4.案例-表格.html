<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    
    <style>
        table,th,td{
            border:1px solid #000
        }
        table{
            border-collapse: collapse
        }
        td,th{
            padding: 10px;
        }
    </style>
    
</head>

<body>
<div id="app">
    <table>
        <tr>
            <th v-for="item in title">{{item}}</th>
        </tr>
        <tr v-for="item, index in books">
            <td>{{index}}</td>
            <td>{{item.name}}</td>
            <td>{{item.date}}</td>
            <td>{{"￥"+item.price}}</td>
            <td>
                <button @click="sub(index)">-</button>
                {{item.num}}
                <button @click="add(index)">+</button>                
            </td>
            <td>
                <button @click="del(index)">移除</button>
            </td>
        </tr>
        <tr>
            <td colspan="6" style="text-align:right;">总价格:{{total}}</td>
        </tr>
    </table>
    
    
</div>

<script>
    new Vue({
        el: "#app",  // 指定绑定的盒子，表示这个盒子内部数据豆油这个Vue对象管理
        data: {
            title: ['编号', '书籍名称', '出版日期', '价格', '数量', '操作'], 
            books: [
                {num:1, name:"书1", date:'2023-01-01', price:100},
                {num:3, name:"书2", date:'2023-01-02', price:101},
                {num:4, name:"书3", date:'2023-01-03', price:102},
                {num:2, name:"书4", date:'2023-01-04', price:103}
            ]
        },
        computed: {
            total(){
                return "￥"+(this.books.reduce((pre, cur) => {
                    return pre + cur.price * cur.num;
                }, 0)).toFixed(2) + "元"
            }
        },
        methods: {
            sub:function(index) {
                if (this.books[index].num === 1) {
                    return;
                }
                this.books[index].num--
            },
            add:function(index) {
                this.books[index].num++
            },
            del:function(index) {
                this.books.splice(index, 1)
            }
        }
    })
</script>


</body>

</html>
